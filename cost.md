# コスト目安

## 1社あたりのコスト（フル処理）

| API | 用途 | コスト | 比率 |
|-----|------|--------|------|
| **Firecrawl** | HP分析（Search+Scrape×5） | $0.385 | 91% |
| **Google Places** | 企業検索 | $0.0375 | 9% |
| **Claude** | AI分析+メール生成 | $0.0001 | <0.1% |
| **合計** | | **約$0.42/社** | |

## スケール別コスト試算

| 処理規模 | Firecrawl | Google Places | Claude | 合計 |
|----------|-----------|---------------|--------|------|
| 20社（1検索） | $7.70 | $0.04 | $0.002 | **約$8** |
| 100社 | $38.50 | $0.04 | $0.008 | **約$39** |
| 1,000社 | $385 | $0.04 | $0.08 | **約$385** |

## コスト構造の詳細

### Firecrawl API（最大コスト要因：91%）

1社あたりの呼び出しパターン：

**パターンA: Search成功時**
- Search API: 1回（$0.01）
- Scrape API: 最大5回（$0.075 × 5 = $0.375）
- 合計: $0.385

**パターンB: Search失敗 → Map利用時**
- Map API: 1回（$0.01）
- Scrape API: 最大5回（$0.375）
- 合計: $0.385

**パターンC: 両方失敗 → フォールバック**
- Scrape API: 1回（$0.05〜$0.10）
- 合計: 約$0.075

### Google Places API

1回の検索時：
- Text Search API: 1回（$0.0025）
- Place Details API: 最大20回（$0.00175 × 20 = $0.035）
- 合計: $0.0375/検索

### Claude API（Sonnet 4）

1社あたり3回のAPI呼び出し：
1. `extractServicesFromContent()`: サービス抽出
2. `analyzeCompanyWithContent()`: HP分析・スコアリング
3. `generateProposalEmail()`: メール生成

トークン使用量（概算）：
- 入力: 約4,500トークン × $0.003/1Mトークン = $0.0000135
- 出力: 約3,584トークン × $0.015/1Mトークン = $0.0000538
- 合計: 約$0.0001/社

## 無料枠・プラン情報

| サービス | 無料枠 |
|----------|--------|
| **Supabase** | 無料枠あり（通常使用量なら無料内） |
| **Firecrawl** | 500クレジット/月（約10社分） |
| **Google Places** | $200/月の無料クレジット |
| **Claude API** | なし（従量課金のみ） |

## コスト削減のヒント

1. **スクレイピングページ数を削減**
   - 現在: 最大5ページ/社
   - 推奨: 2〜3ページ/社 → 約40%削減

2. **検索結果数を制限**
   - 現在: 最大20社/検索
   - 推奨: 10社/検索 → Place Details約50%削減

3. **フォールバック戦略の活用**
   - Search/Map失敗時はトップページのみスクレイピング
   - コスト: $0.385 → $0.075（80%削減）

## 月間コスト試算例

| 利用パターン | 月間処理数 | 月間コスト |
|--------------|------------|------------|
| テスト利用 | 10社 | 無料枠内 |
| 小規模運用 | 100社 | 約$40 |
| 中規模運用 | 500社 | 約$200 |
| 大規模運用 | 1,000社 | 約$400 |

---

*最終更新: 2026-01-26*
